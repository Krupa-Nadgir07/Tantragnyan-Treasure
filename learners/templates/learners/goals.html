{% extends "learner.html" %}
{% load crispy_forms_tags %}

{% block title %}
    <title>Goals</title>
{% endblock %}

{% block content %}
<body class="bg-light">
<body>
    {% if messages %}
  <div class="container mt-3">
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
  </div>
{% endif %}
    <div class="container mt-3">
        <div class="card border-warning mb-3 mb-3">
  <div class="card-body text-color-black">
    <figure>
  <blockquote class="blockquote" style="color:black">
    <p class="mb-0">Setting Goals is the first step in turning the invisible into the visible.</p> 
  </blockquote>
  <figcaption class="blockquote-footer">
    <cite title="Source Title">Tony Robbins</cite>
  </figcaption>
</figure>
  </div>
</div>
        <div class="mb-4  d-flex justify-content-middle align-items-center">
            <h1>Set New Goals, Conquer New Horizons!</h1>
            <a type="button" class="btn btn-warning m-2 ms-auto" href="{% url 'new_goal' %}" style="color:black">New Goal?<br>Click Here!</a>
        </div>
         
        <!-- Display Learner Information -->
        
    
        <!-- Form to Add a New Goal -->
        
        <!-- Display Active Goals -->
        <h3>Your Active Goals</h3>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Goal Type</th>
                    <th>Description</th>
                    <th>Start Date</th>
                    <th>End Date</th>
                    <th></th>
                </tr>
            </thead>
            <tbody class="table-secondary">
                {% for goal in goals_of_user %}
                {% if goal.goal_is_active %}
                <tr>
                    <td>{{ goal.goal_type }}</td>
                    <td>{{ goal.goal_description }}</td>
                    <td>{{ goal.goal_start }}</td>
                    <td>{{ goal.goal_end }}</td>
                    <td>
                        <form method="post" class="d-flex justify-content-center align-items-center" style="margin-bottom:2px">
                            {% csrf_token %}
                        <input type="hidden" name="goal_id" value="{{ goal.goal_id }}">
                        <button method='post' type='submit' class="btn btn-info btn-sm" style="color:black">
                        Goal Accomplished?
                        </form>
                    </td>
                </tr>
                {%endif%}
                {% empty %}
                <tr>
                    <td colspan="4" class="text-center">No active goals found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
{% endblock %}